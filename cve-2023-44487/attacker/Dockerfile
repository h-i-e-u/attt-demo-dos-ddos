FROM golang:1.21

# Cài git
RUN apt update && apt install -y git

# Làm việc trong thư mục GOPATH chuẩn
WORKDIR /go/src/github.com/secengjeff

# Clone repo chuẩn Go Modules
RUN git clone https://github.com/secengjeff/rapidresetclient.git

# Vào đúng thư mục chứa go.mod và main.go
WORKDIR /go/src/github.com/secengjeff/rapidresetclient

# Bật Go modules
ENV GO111MODULE=on

# Tidy để fetch module và build
RUN go mod tidy
RUN go build -o rapidresetclient main.go

# Dùng bash để tương tác sau này
CMD ["/bin/bash"]
